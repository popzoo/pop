<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta content="Lwolf" name="author">
<title>æ–—é±¼è½¦é˜Ÿå±•</title>
<link rel="shortcut icon" href="https://raw.githubusercontent.com/wolf-scream/gift_effect/master/favicon.ico"> 
<meta content="è½¦é˜Ÿ,æ–—é±¼è½¦é˜Ÿ,è½¦é˜Ÿå¤§å…¨,è½¦é˜Ÿé›†åˆ" name="Keywords">
<link rel="stylesheet" href="css/new_page.css">
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? "https://" : "http://");document.write(unescape("%3Cspan style='display:none;' id='cnzz_stat_icon_1278032070'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "v1.cnzz.com/z_stat.php%3Fid%3D1278032070%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));</script>
</head>
<body>
     <a href="https://github.com/popzoo/barrage" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#64CEAA; color:#fff; position: fixed; top: 0; border: 0; left: 0; transform: scale(-1, 1);" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

    <a href="https://github.com/wolf-scream/gift_effect" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#70B7FD; color:#fff; position: fixed; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>
    <style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style> 
<div style=" height:30px; color:#3C3C3C; line-height:30px; margin:20px 0 -30px 0; padding:0 0 0 0;text-align: center; font-size:30px; font-family: Arial,Microsoft YaHei,'å®‹ä½“';">
        <span class="collapse" style="float: left;white-space: nowrap; margin-left: 50px; font-size: 20px;color:#4D4D4D;">
          <dfn data-info="è¿™æ˜¯ç­›é€‰åŠ å…¥æ–—é±¼è½¦é˜Ÿæ¡ä»¶çš„webï¼Œç”±äºæ–—é±¼å®˜æ–¹è½¦é˜Ÿæœç´¢åç©·äººè®¾è®¡ç†å¿µï¼Œä»¥è‡³äºå¤§å®¶æ‰¾ä¸ªé™åˆ¶é—¨æ§›ä½ç‚¹çš„è½¦é˜Ÿè¦é¼ æ ‡æ¥å›ç‚¹ä¸ªå‡ ç™¾æ¬¡æ‰èƒ½æ‰¾åˆ°ï¼Œåªå¥½è‡ªåŠ¨åŠ¨æ‰‹ä¸°è¡£è¶³é£Ÿï¼Œä»¥æ–¹ä¾¿å¤§å®¶è¿›è½¦é˜Ÿå‘¨è½¬ä¸¸å­æˆ–æŠ¢çº¢åŒ…ï¼ˆæ³¨ï¼šç°åœ¨æŠ¢ä¸¸å­æœºå™¨äººå¤ªå¤šï¼Œå‘¨è½¬å…ˆè¯•æ°´å“¦ï¼‰ã€‚è¿™é‡Œæ²¡åŠ ç²‰ä¸ç‰Œç­›é€‰ï¼Œå› ä¸ºæ–—é±¼å¯¹æ¶ˆè´¹æ°´å‹æœåŠ¡è¿˜å¥½ã€‚ç”±äºæ²¡æœ‰è‡ªä¸»æœåŠ¡å™¨æŠ“æ•°æ®ï¼Œæ‰€ä»¥åšä¸»ä¸å®šæ—¶æ‰‹åŠ¨æ›´æ–°è½¦é˜Ÿæ•°æ®ï¼Œå¤§å®¶å¯ä»¥ç‚¹å‡»å›¾ç‰‡è¿›æ–—é±¼æŸ¥çœ‹å…¥é˜Ÿå®¡æ‰¹æ˜¯å¦ä¸€è‡´ï¼">
        åŠ å…¥æ¡ä»¶:
        <label for="no_limit" class="radio">
            <span class="radio-bg"></span>
            <input type="radio" name="radio_fire" id="no_limit"  value="no_limit" checked="checked"/>ä¸é™
            <span class="radio-on"></span>
        </label>
        <label for="level_limit" class="radio">
            <span class="radio-bg"></span>
            <input type="radio" name="radio_fire" id="level_limit"  value="level_limit" />ç­‰çº§
            <span class="radio-on"></span>
        </label>
        <label for="noble_limit" class="radio">
            <span class="radio-bg"></span>
            <input type="radio" name="radio_fire" id="noble_limit"  value="noble_limit" />è´µæ—
            <span class="radio-on"></span>
        </label>
<!--         <label for="fans_limit" class="radio">
            <span class="radio-bg"></span>
            <input type="radio" name="radio_fire" id="fans_limit"  value="fans_limit" />ç²‰ä¸
            <span class="radio-on"></span>
        </label> -->
        </dfn>
        </span>
    ğŸ¡æ–—é±¼è½¦é˜Ÿç­›é€‰ğŸ¡
    <span class="collapse" style="float: right;white-space: nowrap; margin-right: 60px; font-size: 20px;color:#4D4D4D;"> 
        <a class="nav-link" style="text-decoration:none;" href="https://popzoo.github.io/barrage/index.html">äº‘å¼¹å¹•</a> â€¢
        <a class="nav-link" style="text-decoration:none;" href="https://popzoo.github.io/pop/giftshow.html">ç¤¼ç‰©ç§€</a> â€¢
        <a class="nav-link" style="text-decoration:none;" href="https://popzoo.github.io/pop/motorcade.html">è½¦é˜Ÿå±•</a> â€¢
        <a class="nav-link" style="text-decoration:none;" href="https://greasyfork.org/zh-CN/scripts/389379">GreaseFork</a>
    </span>
</div>
<div class="content">
  <div id="device" class="gridalicious">
    <div class="galcolumn">
<!--    <div class="item"><img src="images/1.jpg" alt="å“åº”å¼ç€‘å¸ƒæµå¸ƒå±€æ’ä»¶"/><p>JSä»£ç ç½‘</p></div>  -->
    </div>
  </div>
</div>
    <!-- loadingæŒ‰é’®è‡ªå·±é€šè¿‡æ ·å¼è°ƒæ•´ -->
<footer id="loading" style="width:300px;height:30px;line-height:30px;font-size:18px;text-align:center;border-radius:3px;opacity:0.8;background:grey;margin:10px auto 30px;color:black;">
    åŠ è½½ä¸­...
</footer>
<!-- <script src="js/jquery-1.8.3.min.js"></script> -->
<script src="https://libs.baidu.com/jquery/1.8.3/jquery.min.js"></script>
<script src="js/jquery.grid-a-licious.min.js"></script>
<script src="js/spider-background.js"></script> <!-- è››ç½‘èƒŒæ™¯å›¾ -->
<script type="text/javascript">
    var count = 0;
    var fleetList = new Array();
    // æŒ‰é’®åˆå§‹åŒ–
    function radioEventListener(){
      var radioObj = document.getElementById("no_limit");
      if(radioObj!=undefined){
          // var anchor1 = document.getElementById("no_limit");
          radioObj.addEventListener("change",(function(){radioFunc('no_limit');}));
          var anchor2 = document.getElementById("level_limit");
          anchor2.addEventListener("change",(function(){radioFunc('level_limit');}));
          var anchor3 = document.getElementById("noble_limit");
          anchor3.addEventListener("change",(function(){radioFunc('noble_limit');}));
      }else{
          console.error("æ— æ³•è·å–radioå…ƒç´ ");
      }
    }

    // ç›‘å¬radioçš„onchangeäº‹ä»¶
    function radioFunc(msg){
        if(msg == "no_limit"){//åœç«
            sessionStorage.setItem("radioStatus",msg);
            location.reload();
        }else if(msg =="level_limit"){//å¼€ç«
            sessionStorage.setItem("radioStatus",msg);
            location.reload();
        }else if(msg =="noble_limit"){//è½°ç‚¸
            sessionStorage.setItem("radioStatus",msg);
            location.reload();
        }
    }

    //=========================å›¾ç‰‡åŠ è½½=============================  
    window.onload = function fetchGet(){
        var radioObj = sessionStorage.getItem("radioStatus")!=null ? sessionStorage.getItem("radioStatus") : "no_limit";
        var radioNode = document.getElementById(radioObj);
        radioNode.setAttribute("checked","checked");
        radioEventListener();//ç›‘å¬radio;
        var urlTail = "fleet_type_1.json";//é»˜è®¤
        if(radioObj == "level_limit"){
            urlTail = "fleet_type_2.json";
        }else if(radioObj == "noble_limit"){
            urlTail = "fleet_type_3.json";
        }
        fetch('https://raw.githubusercontent.com/popzoo/gift-show/master/json/'+urlTail,{
            method: 'GET',
            mode: 'cors', //è¯·æ±‚æ¨¡å¼ä¸ºè·¨åŸŸ
            cache: 'default', //no-cache
            credentials: 'omit', // åŒæºåˆ™åŠ å…¥å‡­æ®å¤´,omit,include
        }).then(res => {
            return res.json();
        }).then(result => {
            // var fleetList = JSON.parse(result);
            fleetList = result;
            // console.info(fleetList);
            $("#device").gridalicious('append', makeboxes());
        }).catch(err => {
            console.error('è¯·æ±‚é”™è¯¯', err);
        })
    }

		//æ¨¡æ‹Ÿæ»šåŠ¨æ¡æ»šåŠ¨æ—¶éšæœºæ·»åŠ å†…å®¹
      function makeboxes(){
        var boxes = new Array;
        if(count*50<fleetList.length){
            for(let i=count*50;i<Math.min((count+1)*50, fleetList.length);i++){
                // console.info(fleetList[i]); encodeURIComponent(fleetList[i].mcId)
                let div = $('<div></div>').addClass('item');
                var content = "<a href='https://msg.douyu.com/motorcade/#/motorcade/search?keyword="+fleetList[i].number+"' target='_blank'><img src='"+fleetList[i].icon+"'/></a>";
                content += "<p>è½¦å:<strong style='color:red;'>"+fleetList[i].name+"</strong>&nbsp;äººæ•°:<strong style='color:red;'>";
                content += fleetList[i].memberCount+"</strong>&nbsp;è½¦æ ‡:<strong style='color:red;'>"+fleetList[i].flag+"</strong></p>";
                content += "<p>è½¦å·:<strong style='color:red;'>"+fleetList[i].number+"</strong>&nbsp;å§‹åˆ›:<strong style='color:red;'>";
                content += (new Date(1000*fleetList[i].created_at)).toLocaleDateString() +"</strong>";
                if(sessionStorage.getItem("radioStatus")=="level_limit"){
                  content +="&nbsp;é™åˆ¶:<strong style='color:red;'>Lv."+ fleetList[i].applyJoinOption.level +"</strong></p>";
                }else if(sessionStorage.getItem("radioStatus")=="noble_limit"){
                  let nobleName = fleetList[i].applyJoinOption.desc;
                  nobleName = nobleName.substring(nobleName.length-2);
                  content +="&nbsp;é™åˆ¶:<strong style='color:red;'>"+ nobleName +"</strong></p>";
                }
                div.append(content);
                boxes.push(div);
            }
            count++;
            // console.info("ç¤¼ç‰©æ•°ï¼š"+fleetList.length);
            return boxes;
        }else{
            $('#loading').text('åŠ è½½å®Œæ¯•ï¼Œæ­¤é¡µè½¦é˜Ÿæ€»æ•°:'+fleetList.length);
        }
        return undefined;
    }

		//æ»šåŠ¨æ¡äº‹ä»¶
		$(document).ready(function () {         
			$(window).scroll(function () {
				if(($(window).scrollTop() + $(window).height()) == $(document).height()){//&& makeboxes()!=undefined 
					$("#device").gridalicious('append', makeboxes());//=========================error:length undefined
				}
		  });
		//ä¸»è¦éƒ¨åˆ†
      $("#device").gridalicious({
          gutter: 20,//ç¼éš™å®½åº¦
          width: 300,//å›¾ç‰‡å®½åº¦
          animate: true,//å¯ç”¨åŠ¨ç”»
          animationOptions: {
              speed: 100,
              duration: 200,
              queue: false,//åŒæ­¥æ˜¾ç¤º
              complete:function(data){
                // console.info("åŠ è½½å›¾ç‰‡åŠ¨ç”»è®¾ç½®æˆåŠŸé€‰é¡¹");
              }
          },
      });
    });
</script>
</body>
</html>